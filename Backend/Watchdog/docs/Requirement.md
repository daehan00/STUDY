# 📋 [클라이언트 요구사항 명세서]
저는 현재 여러 개의 마이크로서비스를 운영하고 있습니다. 서비스가 늘어남에 따라 장애 대응이 늦어지는 문제를 해결하고 싶습니다. 다음은 제가 원하는 시스템의 구체적인 요구사항입니다.

## 1. 다양한 감시 대상 (Monitoring Targets)
도커로 띄워진 다음과 같은 환경들을 모두 감시할 수 있어야 합니다.

- Web API 서버: 특정 URL로 요청을 보냈을 때 200 OK 응답이 오는지, 그리고 응답 시간이 제가 설정한 기준(예: 500ms) 이내인지 확인해야 합니다.

- 데이터베이스 (PostgreSQL): 단순히 컨테이너가 떠 있는 게 아니라, 실제 쿼리(SELECT 1)를 날려 응답을 받을 수 있는 '살아있는 상태'여야 합니다.

- 배치 작업용 워커(Worker): 특정 로그 파일이 일정 시간 동안 업데이트되지 않으면 장애로 판단해야 합니다.

## 2. 장애 판단 기준 및 유연성
- 단 한 번의 실패로 알림을 보내는 것은 너무 민감합니다. **'3회 연속 실패 시 장애'**와 같은 임계치(Threshold) 설정을 서비스별로 다르게 지정할 수 있어야 합니다.

- 감시 대상 목록은 수시로 변합니다. 서버를 껐다 켜지 않고도 새로운 감시 대상을 추가하거나 기존 대상을 제거할 수 있는 구조를 원합니다.

## 3. 알림 등급 및 채널 차별화
- 모든 장애가 똑같이 중요하진 않습니다.

    - 경고(Warning): 응답이 조금 느린 경우. (이메일로만 발송)

    - 심각(Critical): 서비스가 완전히 죽은 경우. (슬랙과 이메일 동시 발송)

- 추후에 텔레그램이나 잔디(Jandi) 같은 채널이 추가될 수 있으니, 알림 시스템은 매우 유연해야 합니다.

## 4. 대용량 처리 및 자원 관리
- 감시해야 할 대상이 50개, 100개로 늘어나도 모니터링 컨테이너 하나가 지연 없이 처리할 수 있어야 합니다.

- 모니터링 과정에서 발생하는 로그나 상태 이력(History)이 메모리를 과하게 잡아먹지 않도록 효율적으로 관리해 주세요.

## 5. 도커 환경 구성 (Docker Orchestration)
- 모니터링 컨테이너는 별도의 네트워크 망을 통해 다른 컨테이너들의 상태를 체크해야 합니다.

- 테스트를 위해 최소한 웹 서버 1개, DB 서버 1개를 별도 컨테이너로 띄워 실제 장애 상황을 시뮬레이션할 수 있게 구성해 주세요.